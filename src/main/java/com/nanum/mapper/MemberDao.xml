<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--     
    private int member_id; //�쉶�썝踰덊샇
	private String member_email; //�쉶�썝 �씠硫붿씪
	private String member_password; //�쉶�썝 鍮꾨�踰덊샇
	private String member_signdate; //�쉶�썝 媛��엯�씪
	private String member_lastdate; //�쉶�썝 �젒�냽�씪
	private int member_level; //�쉶�썝 沅뚰븳踰덊샇
	 -->
<mapper namespace="com.nanum.persistance.MemberDao">

<!-- 사용자 목록(기본정보) 조회 -->
<select resultType="com.nanum.domain.Member" id="getMembers">
	SELECT * FROM Member
</select>

<!-- 사용자 등록(기본정보) 
insert into member(member_id, member_email, member_password, member_signdate, member_lastdate, member_level)
VALUES (member_id_seq.nextval,'soom93@gmail.com', 'soomti', to_date(sysdate) ,'2016/06/08','1');
-->
<insert id="registerMember" parameterType="com.nanum.domain.Member"> 
insert into member(member_id, member_email, member_password, member_signdate, member_lastdate, member_level)
VALUES(member_id_seq.nextval,#{email},#{password}, sysdate ,sysdate,'1')
</insert>

<!-- 사용자 정보 갱신(접속일 변경 ) 
update member set member_lastdate=sysdate where member_id=2;
-->
<update id="updateMemberAccount" parameterType="com.nanum.domain.Member">
UPDATE Member
<set>
member_lastdate=sysdate
</set>
WHERE member_id = #{member_id} 
</update>


<!-- 비밀번호 변경하기 
update member set member_password=1004 where member_id=2;
-->
<update id="">
Update Member
<set>
member_password=#{password}
</set>
WHERE member_id =#{member_id}
</update>

<!-- 이메일 중복 확인 
select count(member_email)
from member
where member_email='soom9@gmail.com';
-->
<select resultType="Integer" id="checkedEmail" parameterType="String">
SELECT count(member_email) FROM member
WHERE member_email=#{email}
</select>


</mapper>